var $religion=$("#religion"),$religionSelect=$religion.children("select"),$religionOther=$('<input type="text" name="religion-oth" placeholder="Specify">');$religionSelect.change(function(){console.log($religionSelect.val()),"oth"===$religionSelect.val()?$religionSelect.after($religionOther):$religionOther.remove()});var evalmath=function(e){for(var a=0,e=e.match(/[+\-]*(\.\d+|\d+(\.\d+)?)/g)||[];e.length;)a+=parseFloat(e.shift());return a},calcModifier=function(e){switch(e){case 0:case 1:return-5;case 2:case 3:return-4;case 4:case 5:return-3;case 6:case 7:return-2;case 8:case 9:return-1;case 10:case 11:return 0;case 12:case 13:return 1;case 14:case 15:return 2;case 16:case 17:return 3;case 18:case 19:return 4;case 20:case 21:return 5;case 22:case 23:return 6;case 24:case 25:return 7;case 26:case 27:return 8;case 28:case 29:return 9;case 30:case 31:return 10;case 32:case 33:return 11;case 34:case 35:return 12;case 36:case 37:return 13;case 38:case 39:return 14;case 40:case 41:return 15;case 42:case 43:return 16;case 44:case 45:return 17;case 46:case 47:return 18;case 48:case 49:return 19;case 50:case 51:return 20;default:return"error"}};jQuery.fn.extend({updateAbilitiesTotal:function(){var e=$(this),a=e.parent().find("[data-total]");e.on("input",function(){var r=e.parent(),t=0;r.find("[data-score]").each(function(){var e=$(this);console.log(e.attr("name")+": "+e.val()),""!==e.val()&&(t+=parseInt(evalmath(e.val()),10))}),a.text(calcModifier(t))})}}),$("#abilities").find("li").each(function(){var e=$(this),a=e.find("[data-total]");e.find("input").each(function(){$(this).updateAbilitiesTotal()})}),Modernizr.localstorage?$("#form").on("submit",function(e){e.preventDefault(),localStorage.setItem("character",$(this).serialize()),console.log(localStorage.getItem("character"))}):alert("your browser does not support saving!");